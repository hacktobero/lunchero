version: '3.7'

services:
  backend:
    container_name: backend
    build:
      context: backend
    stdin_open: true
    volumes:
      - lunchero-be:/backend
    networks:
      - frontend
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.backend.rule=Host(`lunchero.kcem.pl`) && PathPrefix(`/api`) || Path(`/docs`) || Path(`/openapi.json`)"
      - "traefik.http.routers.backend.entrypoints=websecure"
      - "traefik.http.routers.backend.tls.certresolver=letsencrypt"
volumes:
  lunchero-be:

networks:
  frontend:
    external: true